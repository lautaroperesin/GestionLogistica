<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="GestionLogisticaApp.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:GestionLogisticaApp"
    xmlns:viewModels="clr-namespace:GestionLogisticaApp.ViewModels"
    Shell.FlyoutBehavior="Disabled"
    Title="Gestion Logistica">

    <Shell.BindingContext>
        <viewModels:AppShellViewModel x:Name="AppShellVM"/>
    </Shell.BindingContext>

    <!-- Header del Flyout personalizado -->
    <Shell.FlyoutHeader>
        <Grid BackgroundColor="#2196F3" HeightRequest="120">
            <StackLayout VerticalOptions="Center" HorizontalOptions="Center">
                <Label Text="ðŸ“š" FontSize="40" HorizontalOptions="Center" TextColor="White"/>
                <Label Text="Gestion LogÃ­stica" FontSize="18" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <!-- Pantalla de Login -->
    <ShellContent
        Title="Login"
        ContentTemplate="{DataTemplate local:LoginPage}"
        Route="LoginPage"
        IsVisible="{Binding LoginVisible}"
        FlyoutItemIsVisible="False" />

    <!-- Menu Principal - Solo visible cuando estÃ¡ logueado -->
    <FlyoutItem Title="ðŸ  Inicio" Icon="home.png" IsVisible="{Binding MenuVisible}">
        <ShellContent
            Title="Dashboard"
            ContentTemplate="{DataTemplate local:MainPage}"
            Route="MainPage" />
    </FlyoutItem>

    <FlyoutItem Title="Buscar Envio" Icon="book.png" IsVisible="{Binding MenuVisible}">
        <ShellContent
            Title="Envios"
            ContentTemplate="{DataTemplate local:EnviosPage}"
            Route="EnviosPage" />
    </FlyoutItem>

    <FlyoutItem Title="Mis Envios" Icon="book.png" IsVisible="{Binding MenuVisible}">
        <ShellContent
            Title="Envios por Conductor"
            ContentTemplate="{DataTemplate local:EnviosPorConductorPage}"
            Route="EnviosPorConductorPage" />
    </FlyoutItem>

    <!-- Footer del Flyout con opciÃ³n de logout -->
    <Shell.FlyoutFooter>
        <StackLayout IsVisible="{Binding MenuVisible}" BackgroundColor="#F5F5F5" Padding="10">
            <Button 
                Text="ðŸšª Cerrar Sesion" 
                BackgroundColor="#F44336" 
                TextColor="White"
                Command="{Binding LogoutCommand}"
                CornerRadius="5"/>
        </StackLayout>
    </Shell.FlyoutFooter>

</Shell>
